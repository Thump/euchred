#!/bin/sh

# This short script automatically generates the Perl messages.pl file,
# based on the messages.h file.  It is expected to be called with a single
# argument, which is the messages.h file.  Its output should be redirected
# to the messages.pl file.
#
# msgc2pl ../common/messages.c > ../common/messages.pl


f=$1;

if [ -z "$f" ]
then
  echo "Usage: msgc2pl <fileA> > <fileB>"
  exit
fi


echo "
#
# (C) Copyright 1999 Denis McLaughlin
#

###########################################################################'
# This file is automatically generated by the makescripts/msgc2pl script
"

cat $f | grep '^#define' | sed -e 's/^#define *\([^ ]*\) *\([^ ]*\).*/$\1=\2;/'

echo "
###########################################################################'
1;
"
