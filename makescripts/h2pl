#!/bin/sh

# This short script automatically generates a Perl .pl file, based on the
# #define statements in a .h file.  It expects to be called with a single
# argument, which is the .h file.  Its output should be redirected to the
# .pl file.
#
# h2pl ../common/messages.h > ../common/messages.pl


f=$1;

if [ -z "$f" ]
then
  echo "Usage: h2pl <fileA.h> > <fileB.pl>"
  exit
fi


echo "
#
# (C) Copyright 1999 Denis McLaughlin
#

###########################################################################'
# This file is automatically generated by the makescripts/h2pl script
"

cat $f | grep '^#define' | sed -e 's/^#define *\([^ ]*\) *\([^ ]*\).*/$\1=\2;/'

echo "
###########################################################################'
1;
"
